# Инструкция по работе с приложением Bus Watcher

В качестве основной библиотеки использовалась библиотека  <a href="http://maptalks.org">maptalks</a>.
Темплейт проекта создан с помощью [Create React App](https://github.com/facebook/create-react-app).


## Работа с остановками

Один из способов оценить качество работы транспорта – это оценить затраты пассажира на передвижение между некоторыми двумя точками. 
Затраты складываются из времени поездки, стоимости билетов, уровня дискомфорта из-за пересадок или забитых салонов и т.д.
Для простоты будем считать, что начальная и конечная точки маршрута – это остановки (игнорируем время пешей прогулки до начальной остановки и от конечной).

Приложение представляет из себя интерактивную веб-карту, позволяющую исследовать затраты на передвижение:

1. На карте отображаются остановки. Изначально ни одна остановка не выбрана.
2. При наведении курсора мыши на остановку появляется подсказка с id и 
названием этой остановки.
3. При клике на остановке она становится выбранной:
* все остальные остановки окрашиваются в цвет, показывающий затраты на перемещение от выбранной до неё;
* при наведении на остальные остановки появляется подсказка. На 
подсказке показано: id и название этой остановки; параметры перемещения: агрегированные затраты, время ожидания, время в салоне, 
число пересадок, штраф за пересадки;
* клик на другой остановке делает её выбранной (т.е. меняет выбранную остановку);
* клик на любом свободном участке карты отменяет выбор (т.е. возвращает карту в исходное состояние).

Карта поддерживает зуминг. Остановки показыватся на фоне карты &copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>

Для раскраски остановок используется параметр "cost" (Агрегированные затраты на передвижение (мин.)).
Выбранная остановка становится начальной, а  все остальные - конечными.
Соблюдается следующая зависимость цвета от параметра "cost" : 
*5 минут и менее — зеленый.
*5-15 минут — желтый
*15-30 минут - красный
*больше 30-ти минут - тёмно-фиолетовый
*нельзя доехать - чёрный.

Для более комфортной работы с остановками настоятельно рекомендуется немного приблизить карту, чтобы остановки отчетливо различались.

## Работа с маршрутами

Улицы и дороги Москвы постоянно меняются: запускаются эстакады,
переделываются перекрёстки, для автобусов создаются выделенки, дороги с
переделываются перекрёстки, для автобусов создаются выделенки, дороги с
двусторонним движением становятся односторонними и наоборот, и т.д. Маршруты общественного транспорта, которые ходят по этим дорогам и улицам, нужно обновлять. В простых случаях это можно сделать автоматически, в сложных
приходится исследовать детали и исправлять маршрут вручную.

Для работы с инструментом "Маршруты" оператору предоставляются функции:
Отобразить все маршруты на карте.
Скрыть все маршруты на карте (вновь отображаются при нажатии на кнопку "Отобразить").
Добавить новый маршрут.
Отменить последнее внесённое в маршрут изменение.
Отобразить/Скрыть инструкцию.
Ими можно воспользоваться, нажав на выпадающее меню "Маршруты" в верхнем правом углу карты.

## Инструкция по работе с инструментом "Маршруты":
1. Нажмите кнопку "Отобразить Маршруты".
На карте появится тренировочный маршрут "Ул. Достоевского" - "Миусский парк".
Покрутите колесико мыши для приближения карты, чтобы лучше рассмотреть его.
Перемещение по карте осуществляется нажатием колесика или левой кнопки мыши на карте и перемещением курсора.

2. Чтобы скрыть маршруты, нажмите на любой свободный участок карты или еще раз на "Маршруты"->"Инструкция",

3. Нажмите кнопку "Добавить маршрут".
Теперь нажатием левой кнопки мыши на любом участке карты Вы зададите начальную точку нового маршрута.
Последующими нажатиями левой кнопки мыши можно продлевать маршрут на карте.
Для завершения создания маршрута совершите двойное нажатие левой кнопки мыши.

4. Продлевать маршрут более удобно в режиме редактирования.
Для входа в режим редактирования маршрута нажмите на него левой кнопкой мыши.
На концах прямых участков маршрута можно заметить значки в виде белых ромбов с черной окантовкой.
Их можно перемещать левой кнопкой мыши, тем самым изменяя длину и расположение этих участков.
В середине каждого прямого участка находятся такие же полупрозрачные значки.
Нажав на них, можно создать новый узел маршрута и перемещать его.
После создания одного или нескольких новых узлов, их создание можно отменить, нажав кнопку "Отменить изменение".
Для сохранения изменений нажмите на любой свободный участок карты.
